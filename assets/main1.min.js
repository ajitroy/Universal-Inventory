window.module=window.module||{};window.module.lp=window.module.lp||{};window.module.lp.form=window.module.lp.form||{};window.module.lp.form.data=null;lp.jQuery(document).ready(function(){var r="#"+window.module.lp.form.data.formContainerId;var n="#"+window.module.lp.form.data.formButtonId;var a="#"+window.module.lp.form.data.errorContainerId;var h=a+" ul";var s=r+" form";lp.jQuery("form").keypress(function(z){if(z.which===13&&z.target.nodeName.toLowerCase()!=="textarea"){z.preventDefault();lp.jQuery("form").submit()}});var l=function(){var A=lp.jQuery(a).outerWidth(true);var z=lp.jQuery(r).outerWidth(true);if(z+A<lp.jQuery(window).width()){y(z)}else{v()}};var y=function(C){var B=lp.jQuery(r).offset();var A=lp.jQuery(document).width();var D=(A-(B.left+C+16))<280?B.left-296:B.left+C+16;var z=lp.jQuery(a);z.css({left:D+"px",top:Math.max(B.top,lp.jQuery(document).scrollTop()+4)+"px",width:"280px"});window.onscroll=function(){u(B,z)}};var u=function(C,z){var G=lp.jQuery(window).scrollTop();var E=G+lp.jQuery(window).height();var A=z.offset().top;var F=Math.round(A+z.innerHeight());var B=lp.jQuery(r).innerHeight();var D=C.top+B;if(D<F&&C.top<lp.jQuery(document).scrollTop()){z.css({position:"absolute"})}else{if(C.top<lp.jQuery(document).scrollTop()){z.css({position:"absolute",top:lp.jQuery(document).scrollTop()})}else{z.css({position:"absolute",top:C.top})}}};var v=function(){lp.jQuery(a).css({position:"fixed",left:"0px",right:"0px",top:"0px"})};var j=function(){var B=document.createElement("p");B.style.width="100%";B.style.height="200px";var C=document.createElement("div");C.style.position="absolute";C.style.top="0px";C.style.left="0px";C.style.visibility="hidden";C.style.width="200px";C.style.height="150px";C.style.overflow="hidden";C.appendChild(B);document.body.appendChild(C);var A=B.offsetWidth;C.style.overflow="scroll";var z=B.offsetWidth;if(A==z){z=C.clientWidth}document.body.removeChild(C);return(A-z)};var t=function(C,B){var z=/\?/.test(C.url)?"&":"?";var A=C.url+z+lp.jQuery(B).serialize();lp.jQuery.ubpoverlay({href:A,padding:0,type:"iframe",onOverlayClick:false,width:C.size.width,height:C.size.height,onComplete:function(){if(C.size.height>lp.jQuery("#ubpoverlay-content").height()){var E=lp.jQuery("#ubpoverlay-content")[0];var D=lp.jQuery("#ubpoverlay-outer")[0];E.style.width=(C.size.width+j())+"px";D.style.width=(C.size.width+j())+"px"}}})};var g=function(A,C){if(window.module.lp.form.data.passParams){var B=/\?/;var z=B.test(A)?"&":"?";A+=z+lp.jQuery.param(lp.jQuery.map(lp.jQuery("form").serializeArray(),function(D){return("pageId"===D.name||"pageVariant"===D.name)?null:D}))}return A};var e=function(){lp.jQuery(n).removeClass("disabled")};var b=function(){lp.jQuery(n).addClass("disabled")};var i=function(){return lp.jQuery(n).hasClass("disabled")};var k=function(B){var C=B.getAttribute("action");if(typeof C==="object"&&C.nodeType===1){var z=C.parentNode;var A=z.removeChild(C);C=k(B);z.appendChild(A)}return C};var q=function(C,z){var D=C.getAttribute("action");if(typeof D==="object"&&D.nodeType===1){var A=D.parentNode;var B=A.removeChild(D);D=q(C,z);A.appendChild(B)}C.setAttribute("action",z)};var p=function(z){lp.jQuery.each(z,function(A,B){if(B.email){z[A]={required:{depends:function(C){if(/\W$/.test(lp.jQuery(this).val())){lp.jQuery(this).val(lp.jQuery.trim(lp.jQuery(this).val()))}return B.required}},email:true}}});return z};var m=function(z){lp.jQuery.validator.addMethod("phone",function(B,A){B=B.replace(/([. \-()+])/g,"");if(z==="uk"){return this.optional(A)||B.length>9&&B.match(/^((44?(0)?)|(0))([0-9]{3,4}){3}$/)}else{if(z==="australian"){return this.optional(A)||(B.length>5&&B.length<16)&&B.match(/^((0|61)(2|4|3|7|8)){0,1}[0-9]{2}[0-9]{2}[0-9]{1}[0-9]{3}$/)}else{if(z==="generic"){return this.optional(A)||(B.length>5&&B.length<16)&&!isNaN(B)}else{return this.optional(A)||(B.length>9)&&B.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)}}}return phoneValidators[z](B,A,this.optional)},"Please specify a valid phone number")};var o=function(B){var z=B.validationType;var A=["generic","australian","uk","north-american"];if((z&&lp.jQuery.inArray(z,A)>-1)){m(z)}};var x=function(){var z=window.module.lp.form.data.confirmAction;return lp.jQuery.inArray(z,["url","post"])===-1};var c=function(){l();o(window.module.lp.form.data);lp.jQuery(s).validate({rules:p(window.module.lp.form.data.validationRules),messages:window.module.lp.form.data.validationMessages,errorContainer:a,errorLabelContainer:h,wrapper:"li",onFocusOut:l,invalidHandler:l,focusInvalid:false,submitHandler:function(z){if(i()){return}b();lp.jQuery.ajax({url:k(lp.jQuery(z).get(0))+"&lp-form-submit-method=ajax",type:"POST",data:lp.jQuery(z).serialize(),debug:true,error:function(){alert(window.module.lp.form.data.errorMessage||"We're sorry the form could not be submitted because something went wrong. Please try again.")},success:function(C){if(C.protected_assets){window.module.lp.form.responseData={protectedAssets:C.protected_assets}}var A=lp.jQuery("#"+window.module.lp.form.data.formContainerId+" form");switch(window.module.lp.form.data.confirmAction){case"url":var B=g(window.module.lp.form.data.confirmData,z);window.location.href=B.replace(/\+/g,"%20");break;case"message":alert(window.module.lp.form.data.confirmData);break;case"modal":alert("Thanks for showing your interest. We will contact you soon!!");break;case"post":A.unbind();q(A.get(0),window.module.lp.form.data.confirmData);A.submit();break}},complete:function(){if(x()){e();z.blur();z.reset()}}})}})};var w=function(){var C={},B;var z=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");var A;for(A=0;A<z.length;A++){B=z[A].split("=");C[B[0]]=B[1]}return C};var f=function(){var E=w();var A=lp.jQuery("#"+window.module.lp.form.data.formContainerId+" form");var B;var D=["pageid","pagevariant"];for(var C in E){B=lp.jQuery(A).find("input[name="+C+"]")[0]||lp.jQuery(A).find("textarea[name="+C+"]")[0];var z=lp.jQuery.inArray(D,C.toLowerCase());if(typeof B!=="undefined"&&z===-1){if(B.type==="text"||B.type==="hidden"||B.type==="textarea"){B.value=decodeURIComponent(E[C])}}}};c();f();if(lp.jQuery.browser.msie&&parseInt(lp.jQuery.browser.version,10)<9){var d;lp.jQuery("select").each(function(){d=lp.jQuery(this);d.data("origWidth",d.outerWidth())}).mousedown(function(){lp.jQuery(this).css("width","auto")}).bind("blur change",function(){d=lp.jQuery(this);d.css("width",d.data("origWidth"))})}});lp.jQuery(document).ready(function(){var a=function(g,d){if(g.offsetHeight>d){var f=1;var c=30;var b=parseInt(g.style.width,10);while(lp.jQuery(g).height()>d&&c>f){g.style.width=(b+f)+"px";f++}}};lp.jQuery(".lp-pom-form label").each(function(b,d){if(d.style.height){var c=parseInt(d.style.height);d.style.height="auto";a(d,c)}})});